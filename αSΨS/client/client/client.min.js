/* αdithep SriNarulα | 09-01-2014 */
var ALPHA,α;ALPHA=function(){function a(){}return a.prototype.Module={config:function(a){return{_template:"layout",init:function(){return a.sb.config_router({template:this._template})},destroy:function(){}}},layout:function(a){return{_template:"layout",init:function(){var b;return b=a.sb.init(this),a.sb.map_event(b.events)},"event click #logout":function(){return a.sb.logout()},destroy:function(){}}},home:function(a){return{init:function(){var b;return b=a.sb.init(this),a.sb.map_router(b.routes)},"route home /":function(){},destroy:function(){}}},login:function(a){return{_template:"login",init:function(){var b;return b=a.sb.init(this),a.sb.map_event(b.events),a.sb.map_helpers(b.helpers)},"helper creatingAccount":function(){return a.sb.session_get({p:"creatingAccount"})},"event click #loginform":function(){return a.sb.session_set({p:"creatingAccount",v:!1})},"event click #accountform":function(){return a.sb.session_set({p:"creatingAccount",v:!0})},"event click #createaccount":function(b){var c;return a.sb.session_set({p:"creatingAccount",v:!1}),c={username:b.t.find("#username").value,password:b.t.find("#password").value,email:b.t.find("#email").value,name:b.t.find("#name").value},a.sb.create_account(c)},"event click #login":function(b){var c;return c={username:b.t.find("#username").value,password:b.t.find("#password").value},a.sb.login(c)},"event click #logout":function(){return a.sb.logout()},destroy:function(){}}},module_test:function(a){return{_template:"moduleTest",init:function(){var b;return b=a.sb.init(this),a.sb.map_router(b.routes),a.sb.map_event(b.events),a.sb.map_helpers(b.helpers),a.sb.autorun({actions:this.autorun})},autorun:function(){var b,c;return b=a.sb.session_get({p:"moduleTest-rr"}),null!==document.getElementById("child")&&null!==a.sb.user()?(c=0,a.sb.get_child({p:"#child"}).map(function(){var b;return b=a.sb.get_child({p:this,c:".close"}),a.sb.set_attr({p:b,a:"href",v:""+c}),c++})):void 0},"helper route":function(b){var c,d,e;return e=a.sb.session_get({p:"moduleTest-rr"}),e?(d=e.split("/"),c=void 0===d[2]?""+e+"/"+b.spacebar_arg:0===d[2].length?""+e+b.spacebar_arg:""+e+"-"+b.spacebar_arg):void 0},"route moduletest moduletest/:ll":function(b){var c;return a.sb.session_set({p:"moduleTest-rr",v:Router.current().path}),b.route_this.render("moduleTest"),c={route_params:b.route_this.params.ll},a.sb.routing(c)},"route moduletest moduletest":function(b){return a.sb.session_set({p:"moduleTest-rr",v:Router.current().path}),b.route_this.render("moduleTest"),a.sb.empty_child({element:"#child"})},"event click .click":function(a){return a.e.currentTarget.innerHTML="hello",a.e.currentTarget},destroy:function(){}}},post_lists:function(a){return{_template:"postlists",init:function(){var b;return b=a.sb.init(this),a.sb.map_helpers(b.helpers),a.post={_dep:new Deps.Dependency,_value:[Template.an],get:function(){return this._dep.depend(),this._value},spush:function(a){return this._value.push(a),this._dep.changed()}},a.post},"helper posts":function(){return a.post.get()}}},add_contact:function(a){return{_template:"add_contact",init:function(){var b;return b=a.sb.init(this),a.input=this.reactive_input,a.session=!1,b.routes&&a.sb.map_router(b.routes),b.helpers&&a.sb.map_helpers(b.helpers),b.events&&a.sb.map_event(b.events),b.mcall&&a.sb.mcall(b.mcall),b.subscribe?a.sb.subscribe(b.subscribe):void 0},"subscribe list":function(){var b,c,d;return console.log("lists subscribed"),b=DATA.findOne({select_name:"initials"},{fields:{_id:0}}),c=DATA.findOne({input_name:"first_name"},{fields:{_id:0}}),d=DATA.findOne({input_name:"company_name"},{fields:{_id:0}}),b&&a.input.spush("individual",b),c&&a.input.spush("individual",c),d?a.input.spush("company",d):void 0},"subscribe countries_list":function(){return console.log("countries subscribed")},"route add_contact add_contact/:ll":function(){},"route add_contact add_contact":function(a){return a.route_this.render("add_contact")},"helper company":function(){return a.sb.session_get({p:"company"})},"helper buttons_individual":function(){var a;return a=DATA.findOne({name:"contact_button_list"}),a?DATA.find({$and:[{type:a._id,individual:{$ne:2},input_starting:{$ne:1},select_starting:{$ne:1}}]}):void 0},"helper buttons_company":function(){var a;return a=DATA.findOne({name:"contact_button_list"}),a?DATA.find({$and:[{type:a._id,individual:{$ne:1},input_starting:{$ne:1},select_starting:{$ne:1}}]}):void 0},"helper countries":function(a){return a.spacebar_arg?(console.log(a.spacebar_arg),DATA.find({type:{_str:a.spacebar_arg}})):void 0},"helper input_select":function(a){return console.log(a.spacebar_arg),DATA.find({type:{_str:a.spacebar_arg}})},"helper input_company":function(){return a.input.get("company")},"helper input_individual":function(){var b;return b=a.input.get("individual"),console.log(b),b},"event click .individual":function(){return a.sb.session_set({p:"company",v:!1})},"event click .company":function(){return a.sb.session_set({p:"company",v:!0})},"event focus .input_select":function(a){return""===a.e.currentTarget.value?$(".input_select_box").hide():$(".input_select_box").show()},"event blur .input_select":function(a){""!==a.e.currentTarget.value?($(".blue_color").html()&&(a.e.currentTarget.value=$(".blue_color").html(),a.e.currentTarget.dataset.value=$(".blue_color").data("value")),""===a.e.currentTarget.dataset.value&&(a.e.currentTarget.value="")):(a.e.currentTarget.value="",a.e.currentTarget.dataset.value=""),$(".input_select_box").hide()},"event mouseover .lala_item":function(a){var b;$(".lala_item").removeClass("blue_color"),$(a.e.target).addClass("blue_color"),b=$(a.e.target).html(),$(".input_select").val(b)},"event click .input_select":function(b){var c,d;""!==b.e.currentTarget.value&&($(".input_select_box").show(),c={input:b.e.currentTarget.value,field:b.e.currentTarget.dataset.database},d=Meteor.subscribe("cities_list",c),a.session&&a.session.stop(),a.session=d)},"event keyup .input_select":function(b){var c,d,e,f;if(40===b.e.which)$(".lala_item").hasClass("blue_color")===!1?$(".input_select_list li:first-child").addClass("blue_color"):$(".blue_color").removeClass("blue_color").next().addClass("blue_color"),c=$(".blue_color").html(),c&&(b.e.currentTarget.value=c);else if(38===b.e.which)$(".lala_item").hasClass("blue_color")===!1?$(".input_select_list li:first-child").addClass("blue_color"):$(".blue_color").removeClass("blue_color").prev().addClass("blue_color"),c=$(".blue_color").html(),c&&(b.e.currentTarget.value=c);else if(13===b.e.which){if($(".lala_item").hasClass("blue_color")&&(d=$(".blue_color").html(),d&&(b.e.currentTarget.value=d,b.e.currentTarget.dataset.value=$(".blue_color").data("value"))),$(".input_select_box").hide(),a.session)return a.session.stop()}else if(27===b.e.which){if(b.e.currentTarget.value="",b.e.currentTarget.dataset.value="",$(".input_select_box").hide(),a.session)return a.session.stop()}else""===b.e.currentTarget.value?$(".input_select_box").hide():$(".input_select_box").show(),""!==b.e.currentTarget.value&&(e={input:b.e.currentTarget.value,field:b.e.currentTarget.dataset.database},f=Meteor.subscribe("cities_list",e),a.session&&a.session.stop(),a.session=f)},"event click .submit":function(a){var b,c,d;return b=a.t.findAll("input, select"),console.log(b),c={},_.map(b,function(a){var b;return"input"===a.localName?"0"===a.dataset.array?c[a.name]=a.value:"1"===a.dataset.array&&(void 0===c[a.name]?(c[a.name]=[],c[a.name].push(a.value)):c[a.name].push(a.value)):"select"===a.localName&&(b=new Meteor.Collection.ObjectID(a.value),"0"===a.dataset.array?c[a.name]=b:"1"===a.dataset.array&&(void 0===c[a.name]?(c[a.name]=[],c[a.name].push(b)):c[a.name].push(b))),c}),console.log(c),d={human:c},Meteor.call("insert_human",d,function(){return console.log("inserted")})},"event click .save_contact_json":function(){return Meteor.call("save_contact_json",function(){return console.log("json saved")})},"event click .add_contact_button_individual":function(b){var c,d;return c=b.e.currentTarget.getAttribute("data-id"),d=DATA.findOne({_id:{_str:c}},{fields:{_id:0}}),d.input="remove_input_individual",console.log(d),a.input.spush("individual",d)},"event click .add_contact_button_company":function(b){var c,d;return c=b.e.currentTarget.getAttribute("data-id"),d=DATA.findOne({_id:{_str:c}},{fields:{_id:0}}),console.log(d),d.input="remove_input_company",a.input.spush("company",d)},"event click .remove_input_individual":function(b){var c;return c=b.e.currentTarget.getAttribute("data-index"),a.input.spop("individual",c)},"event click .remove_input_company":function(b){var c;return c=b.e.currentTarget.getAttribute("data-index"),a.input.spop("company",c)},reactive_input:{_dep:new Deps.Dependency,_value:{},get:function(a){return this._dep.depend(),this._value[a]},spush:function(a,b){var c,d,e;return void 0===this._value[a]&&(this._value[a]=[]),1===b.array?this._value[a].push(b):(c=0,d=0,e=0,_.map(this._value[a],function(a){return b.input_name&&(b.input_name===a.input_name&&(e=c,d=1),c++),b.select_name?(b.select_name===a.select_name&&(e=c,d=1),c++):void 0}),0===d?this._value[a].push(b):this._value[a].splice(e,1)),this._value[a].map(function(a,b){return a.index=b,a.index}),this._dep.changed()},spop:function(a,b){return this._value[a].splice(b,1),this._value[a].map(function(a,b){return a.index=b,a.index}),this._dep.changed()}},destroy:function(){}}}},a.prototype.Sandbox={create:function(a){return{config_router:function(b){return a.core.config_iron_router(b)},map_router:function(b){return a.core.map_iron_router(b)},map_event:function(b){return a.core.meteor_event_map(b)},map_helpers:function(b){return a.core.meteor_helpers(b)},mcall:function(b){return a.core.meteor_call(b)},subscribe:function(b){return a.core.meteor_subscribe(b)},init:function(b){return a.core.init_seperator(b)},routing:function(b){return a.core.routing(b)},login:function(b){return a.core.meteor_login(b)},logout:function(b){return a.core.meteor_logout(b)},session_get:function(b){return a.core.meteor_session_get(b)},session_set:function(b){return a.core.meteor_session_set(b)},create_account:function(b){return a.core.meteor_create_account(b)},empty_child:function(b){return a.core.jquery_empty(b)},autorun:function(b){return a.core.meteor_deps_autorun(b)},user:function(b){return a.core.meteor_user(b)},get_child:function(b){return a.core.jquery_children(b)},set_attr:function(b){return a.core.jquery_attr(b)}}}},a.prototype.Core={activate_module:function(a){var b,c,d,e;return"function"==typeof a.mod&&"function"==typeof a.sb?(b={core:this},e={sb:a.sb(b)},c=a.mod(e),c.init&&"function"==typeof c.init?(d={module:c},this.start(d)):console.log("Module'"+a.mod+"' Registration : FAILED : instance has no init or destroy functions")):console.log("Module'"+a.mod+"' Registration : FAILED : one or more argument are of incorrect type")},start:function(a){return a?a.module.init():void 0},start_all:function(a){var b=this;return _.map(a.mod,function(c){var d;return d={mod:c,sb:a.sb},b.activate_module(d)})},config_iron_router:function(a){return Router.configure({layoutTemplate:a.template,before:function(){return null===Meteor.user()?(this.render("login"),this.stop()):void 0}})},map_iron_router:function(a){return _.map(a.routes,function(a){return Router.map(function(){return this.route(a.route_name,{path:a.route_path,action:function(){var b;return a.route_actions?(b={route_this:this},a.route_actions(b)):void 0}})})})},meteor_event_map:function(a){return _.map(a.events,function(b){var c,d;return console.log(b),c=""+b.event_name+" "+b.event_element,d={},d[c]=function(a,c){var d;return d={e:a,t:c,"this":this},b.event_actions(d)},Template[a.template].events(d)})},meteor_helpers:function(a){return _.map(a.helpers,function(b){return Template[a.template][b.helper_name]=function(a,c){var d;return d={spacebar_arg:a,spacebar_option:c},b.helper_actions(d)},Template[a.template][b.helper_name]})},meteor_call:function(a){return _.map(a.mcall,function(a){return Meteor.call(a.mcall_name,function(b,c){var d;return d={res:c},a.mcall_actions(d)})})},meteor_subscribe:function(a){return _.map(a.subscribe,function(a){return Meteor.subscribe(a.subscribe_name,[],function(){return a.subscribe_actions()})})},init_seperator:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return l={},l.events={},l.helpers={},l.routes={},l.mcall={},l.subscribe={},l.events.template=a._template,l.helpers.template=a._template,l.routes.template=a._template,l.events.events=[],l.helpers.helpers=[],l.routes.routes=[],l.mcall.mcall=[],l.subscribe.subscribe=[],b=_.keys(a),c=_.filter(b,function(a){return 0===a.indexOf("event")}),e=_.filter(b,function(a){return 0===a.indexOf("helper")}),m=_.filter(b,function(a){return 0===a.indexOf("route")}),j=_.filter(b,function(a){return 0===a.indexOf("mcall")}),o=_.filter(b,function(a){return 0===a.indexOf("subscribe")}),d=_.pick(a,c),f=_.pick(a,e),n=_.pick(a,m),k=_.pick(a,j),p=_.pick(a,o),g=0,_.map(d,function(a,b){var c;return c=b.split(" "),l.events.events[g]={event_name:c[1],event_element:c[2],event_actions:a},g++}),h=0,_.map(f,function(a,b){var c;return c=b.split(" "),l.helpers.helpers[h]={helper_name:c[1],helper_actions:a},h++}),i=0,_.map(n,function(a,b){var c;return c=b.split(" "),l.routes.routes[i]={route_name:c[1],route_path:c[2],route_actions:a},i++}),_.map(k,function(a,b){var c;return c=b.split(" "),l.mcall.mcall[i]={mcall_name:c[1],mcall_actions:a},i++}),_.map(p,function(a,b){var c;return c=b.split(" "),l.subscribe.subscribe[i]={subscribe_name:c[1],subscribe_actions:a},i++}),l},routing:function(a){var b,c,d;if(a.route_params&&null!==document.getElementById("child")&&null!==Meteor.user()){for(b=a.route_params.split("-"),c=$("#child").children().map(function(){return $(this).attr("class")}),d=0;c.length>b.length;)$("#child div:last-child").remove(),c.splice(-1,1);_.map(b,function(a){return void 0!==c?(c[d]||Template[a]&&UI.materialize(Template[a],document.getElementById("child")),d++):Template[a]?UI.materialize(Template[a],document.getElementById("child")):void 0})}return Session.set("moduleTest-rr",Router.current().path)},meteor_login:function(a){return Meteor.loginWithPassword(a.username,a.password)},meteor_logout:function(){return Meteor.logout()},meteor_session_get:function(a){return Session.get(a.p)},meteor_session_set:function(a){return Session.set(a.p,a.v)},meteor_create_account:function(a){return Accounts.createUser({username:a.username,password:a.password,email:a.email,profile:{name:a.name}})},meteor_deps_autorun:function(a){return console.log(a),Deps.autorun(function(){return a.actions()})},meteor_user:function(){return Meteor.user()},jquery_empty:function(a){return $(a.element).empty()},jquery_children:function(a){var b;return a.p&&a.c?b=$(a.p).children(a.c):a.p?b=$(a.p).children():a.c&&children(a.c),b},jquery_attr:function(a){var b;return a.p&&a.a&&a.v?b=$(a.p).attr(a.a,a.v):a.a&&a.v&&attr(a.a,a.v),b}},a}(),α=new ALPHA,Template.select_list.rendered=function(){return $(".lala_item").hasClass("blue_color")===!1?$(".input_select_list li:first-child").addClass("blue_color"):void 0},Template.select_list.destroyed=function(){return $(".lala_item").hasClass("blue_color")===!1?$(".input_select_list li:first-child").addClass("blue_color"):void 0},α.Core.start_all({sb:α.Sandbox.create,mod:α.Module});